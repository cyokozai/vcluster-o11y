repositories:
  - name: loft
    url: https://charts.loft.sh

releases:
  - name: vcluster
    namespace: vcluster-system
    chart: loft/vcluster
    version: "0.19.4"
    createNamespace: true
    timeout: 1800
    values:
      - config/vcluster.yaml
    hooks:
      - events: ["presync"]
        showlogs: true
        command: "kubectl"
        args: ["create", "namespace", "vcluster-system", "--dry-run=client", "-o", "yaml", "|", "kubectl", "apply", "-f", "-"]
